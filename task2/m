#! /bin/bash

clear
echo "----------------------------------------------------------------------------------------------"
make $*
echo "----------------------------------------------------------------------------------------------"
echo "    LAUNCH TESTS:"
echo "----------------------------------------------------------------------------------------------"
for test in $(ls Tests)
do
	./task2.out < Tests/$test > Outs/$test
done

if diff Refs/ Outs/
then
	echo "Tests OK!"
else
	echo "Tests NOT OK!"
fi	
echo "----------------------------------------------------------------------------------------------"
echo "    DUMPS:"
echo "----------------------------------------------------------------------------------------------"
cat parser_stdio_dump.txt
cat queue_dump.txt
dot -Tjpeg graph_dump.dot -o graph_dump.jpeg
feh graph_dump.jpeg
echo "----------------------------------------------------------------------------------------------"
echo "    END"
echo "----------------------------------------------------------------------------------------------"
